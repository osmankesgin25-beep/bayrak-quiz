<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Flags Quiz</title>
    <!-- AdMob Script -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-YOUR_PUBLISHER_ID" crossorigin="anonymous"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .game-container {
            background: white;
            border-radius: 12px;
            width: 100%;
            max-width: 350px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        /* √úst Kontroller - √áOK K√ú√á√úK */
        .top-bar {
            background: linear-gradient(to right, #4a6fa5, #5d8cc9);
            padding: 8px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .game-title {
            color: white;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .stats-container {
            display: flex;
            gap: 8px;
        }
        
        .stat-item {
            text-align: center;
            color: white;
        }
        
        .stat-value {
            font-size: 0.9rem;
            font-weight: bold;
            line-height: 1;
        }
        
        .stat-label {
            font-size: 0.5rem;
            opacity: 0.9;
        }
        
        /* REKLAMLAR - √áOK K√ú√á√úK */
        .ad-container {
            width: 100%;
            height: 30px;
            background: #f8f9fa;
            margin: 3px 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            border: 1px solid #e0e0e0;
            font-size: 0.6rem;
        }
        
        .ad-label {
            position: absolute;
            top: 2px;
            right: 2px;
            background: rgba(0, 0, 0, 0.1);
            padding: 1px 3px;
            border-radius: 3px;
            font-size: 0.4rem;
            color: #666;
        }
        
        /* Oyun Alanƒ± - √áOK K√ú√á√úK */
        .game-area {
            padding: 10px;
        }
        
        /* Dil ve Zorluk Butonlarƒ± - BAYRAƒûIN SOLUNDA VE SAƒûINDA */
        .flag-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            position: relative;
        }
        
        .control-btn {
            padding: 6px 10px;
            border: none;
            border-radius: 10px;
            font-weight: 500;
            cursor: pointer;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            gap: 4px;
            min-width: 60px;
            justify-content: center;
        }
        
        .language-btn {
            background: linear-gradient(135deg, #4a6fa5, #5d8cc9);
            color: white;
            box-shadow: 0 2px 4px rgba(74, 111, 165, 0.2);
        }
        
        .difficulty-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            box-shadow: 0 2px 4px rgba(39, 174, 96, 0.2);
        }
        
        /* Men√ºler - Gƒ∞ZLƒ∞ */
        .language-menu {
            position: absolute;
            top: 40px;
            left: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 8px;
            max-height: 150px;
            overflow-y: auto;
            display: none;
            z-index: 100;
            min-width: 120px;
        }
        
        .difficulty-menu {
            position: absolute;
            top: 40px;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 8px;
            display: none;
            z-index: 100;
            min-width: 100px;
        }
        
        .language-menu.active,
        .difficulty-menu.active {
            display: block;
        }
        
        .menu-option {
            padding: 6px 8px;
            border: none;
            border-radius: 6px;
            background: white;
            color: #333;
            font-size: 0.7rem;
            cursor: pointer;
            text-align: left;
            width: 100%;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 2px;
        }
        
        .menu-option:hover {
            background: #f0f7ff;
        }
        
        .menu-option.active {
            background: #4a6fa5;
            color: white;
        }
        
        /* Zorluk Butonlarƒ± - K√ú√á√úK */
        .difficulty-buttons {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin-bottom: 10px;
        }
        
        .diff-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 10px;
            font-weight: 500;
            cursor: pointer;
            font-size: 0.7rem;
        }
        
        .easy-btn {
            background: #d4edda;
            color: #155724;
        }
        
        .medium-btn {
            background: #fff3cd;
            color: #856404;
        }
        
        .hard-btn {
            background: #f8d7da;
            color: #721c24;
        }
        
        .diff-btn.active {
            transform: scale(1.02);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        /* Bayrak - K√ú√á√úK */
        .flag-section {
            text-align: center;
            margin-bottom: 10px;
        }
        
        .flag-display {
            width: 100px;
            height: 70px;
            margin: 0 auto 8px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 3px solid #4a6fa5;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            line-height: 1;
        }
        
        .question-text {
            font-size: 0.8rem;
            color: #333;
            font-weight: 500;
            margin-bottom: 2px;
        }
        
        .current-language {
            font-size: 0.65rem;
            color: #666;
            font-style: italic;
        }
        
        /* Timer - K√ú√á√úK */
        .timer-section {
            margin: 8px 0;
            text-align: center;
        }
        
        .timer-display {
            font-size: 1.4rem;
            font-weight: bold;
            color: #4a6fa5;
            font-family: monospace;
            margin-bottom: 4px;
        }
        
        .time-bar {
            width: 100%;
            height: 5px;
            background: #e0e0e0;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .time-fill {
            height: 100%;
            background: linear-gradient(to right, #27ae60, #f39c12, #e74c3c);
            border-radius: 2px;
            transition: width 1s linear;
            width: 100%;
        }
        
        /* Video Reklam Butonu - K√ú√á√úK */
        .video-reward-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 600;
            cursor: pointer;
            margin: 5px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            width: 100%;
        }
        
        /* Cevap Se√ßenekleri - K√ú√á√úK */
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 6px;
            margin-top: 8px;
        }
        
        .option-btn {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 35px;
        }
        
        .option-btn.correct {
            background: #27ae60;
            color: white;
            border-color: #219653;
        }
        
        .option-btn.wrong {
            background: #e74c3c;
            color: white;
            border-color: #c0392b;
        }
        
        /* Sonu√ß Ekranƒ± - K√ú√á√úK */
        .result-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 10px;
        }
        
        .result-card {
            background: white;
            padding: 15px 10px;
            border-radius: 12px;
            text-align: center;
            max-width: 300px;
            width: 100%;
        }
        
        .result-emoji {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }
        
        .result-title {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 10px;
        }
        
        .result-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin: 10px 0;
        }
        
        .result-stat {
            padding: 8px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .result-stat .stat-value {
            font-size: 1.2rem;
            color: #4a6fa5;
        }
        
        .restart-game {
            padding: 10px 20px;
            background: #4a6fa5;
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 8px;
            width: 100%;
        }
        
        /* Interstitial Reklam */
        .interstitial-ad-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 10px;
        }
        
        .interstitial-content {
            background: white;
            border-radius: 12px;
            padding: 15px;
            max-width: 300px;
            width: 100%;
            text-align: center;
        }
        
        .interstitial-content h2 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .interstitial-content p {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.4;
            font-size: 0.8rem;
        }
        
        .interstitial-buttons {
            display: flex;
            gap: 8px;
            justify-content: center;
        }
        
        .interstitial-buttons button {
            padding: 8px 15px;
            border: none;
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            flex: 1;
            font-size: 0.8rem;
        }
        
        .interstitial-close {
            background: #e74c3c;
            color: white;
        }
        
        .interstitial-watch {
            background: #4a6fa5;
            color: white;
        }
        
        /* Responsive */
        @media (max-width: 480px) {
            .game-container {
                max-width: 320px;
            }
            
            .flag-display {
                width: 90px;
                height: 65px;
                font-size: 35px;
            }
            
            .question-text {
                font-size: 0.75rem;
            }
        }
        
        @media (max-width: 360px) {
            .game-container {
                max-width: 300px;
            }
            
            .stat-value {
                font-size: 0.8rem;
            }
            
            .flag-display {
                width: 80px;
                height: 60px;
                font-size: 30px;
            }
            
            .control-btn {
                min-width: 50px;
                padding: 5px 8px;
                font-size: 0.65rem;
            }
        }
    </style>
</head>
<body>
    <!-- Interstitial Reklam -->
    <div class="interstitial-ad-overlay" id="interstitialAd">
        <div class="interstitial-content">
            <h2 id="adTitle">Watch ad to continue!</h2>
            <p id="adDescription">You can continue the game and earn extra rewards by watching ads.</p>
            <div class="interstitial-buttons">
                <button class="interstitial-close" onclick="closeInterstitial()">Close</button>
                <button class="interstitial-watch" onclick="watchRewardVideo()">Watch Video</button>
            </div>
        </div>
    </div>

    <div class="game-container">
        <!-- √úst Banner Reklam -->
        <div class="ad-container" id="topBannerAd">
            <div class="ad-label">Ad</div>
            <!-- AdMob Banner Reklamƒ± -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-YOUR_PUBLISHER_ID"
                 data-ad-slot="1234567890"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>
        
        <!-- √úst Kontroller -->
        <div class="top-bar">
            <div class="game-title">Flags Quiz</div>
            <div class="stats-container">
                <div class="stat-item">
                    <div class="stat-value" id="score">0</div>
                    <div class="stat-label">Score</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="questions">0/10</div>
                    <div class="stat-label">Q</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="streak">0</div>
                    <div class="stat-label">Streak</div>
                </div>
            </div>
        </div>
        
        <!-- Oyun Alanƒ± -->
        <div class="game-area">
            <!-- Bayrak ve Kontroller -->
            <div class="flag-controls">
                <!-- Dil Butonu - SOL -->
                <button class="control-btn language-btn" onclick="toggleLanguageMenu()">
                    <span>üåê</span>
                    <span id="currentLangCode">EN</span>
                </button>
                <div class="language-menu" id="languageMenu">
                    <!-- Diller buraya JavaScript ile eklenecek -->
                </div>
                
                <!-- Zorluk Butonu - SAƒû -->
                <button class="control-btn difficulty-btn" onclick="toggleDifficultyMenu()">
                    <span>‚öôÔ∏è</span>
                    <span id="currentDifficultyCode">EASY</span>
                </button>
                <div class="difficulty-menu" id="difficultyMenu">
                    <button class="menu-option diff-option" data-diff="easy" onclick="updateDifficulty('easy'); toggleDifficultyMenu();">Easy</button>
                    <button class="menu-option diff-option" data-diff="medium" onclick="updateDifficulty('medium'); toggleDifficultyMenu();">Medium</button>
                    <button class="menu-option diff-option" data-diff="hard" onclick="updateDifficulty('hard'); toggleDifficultyMenu();">Hard</button>
                </div>
            </div>
            
            <!-- Bayrak B√∂l√ºm√º -->
            <div class="flag-section">
                <div class="flag-display" id="flagDisplay">üè≥Ô∏è</div>
                <div class="question-text" id="questionText">Which country does this flag belong to?</div>
                <div class="current-language" id="currentLanguage">English</div>
            </div>
            
            <!-- Timer -->
            <div class="timer-section">
                <div class="timer-display" id="timerDisplay">20</div>
                <div class="time-bar">
                    <div class="time-fill" id="timeFill"></div>
                </div>
            </div>
            
            <!-- Video Reklam Butonu -->
            <button class="video-reward-btn" id="videoRewardBtn" onclick="showRewardVideoAd()">
                <span>üé¨</span>
                <span id="rewardText">+10 sec Video</span>
            </button>
            
            <!-- Cevap Se√ßenekleri -->
            <div class="options-container" id="optionsContainer">
                <!-- Se√ßenekler buraya eklenecek -->
            </div>
        </div>
        
        <!-- Alt Reklam -->
        <div class="ad-container" id="bottomBannerAd">
            <div class="ad-label">Ad</div>
            <!-- AdMob Banner Reklamƒ± -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-YOUR_PUBLISHER_ID"
                 data-ad-slot="0987654321"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>
    </div>
    
    <!-- Sonu√ß Ekranƒ± -->
    <div class="result-screen" id="resultScreen">
        <div class="result-card">
            <div class="result-emoji" id="resultEmoji">üèÜ</div>
            <div class="result-title" id="resultTitle">Game Over!</div>
            <div class="result-stats">
                <div class="result-stat">
                    <div id="finalScoreLabel">Score</div>
                    <div class="stat-value" id="finalScore">0</div>
                </div>
                <div class="result-stat">
                    <div id="finalCorrectLabel">Correct</div>
                    <div class="stat-value" id="finalCorrect">0</div>
                </div>
                <div class="result-stat">
                    <div id="finalStreakLabel">Streak</div>
                    <div class="stat-value" id="finalStreak">0</div>
                </div>
                <div class="result-stat">
                    <div id="finalAccuracyLabel">Accuracy</div>
                    <div class="stat-value" id="finalAccuracy">0%</div>
                </div>
            </div>
            <button class="restart-game" onclick="restartGame()">PLAY AGAIN</button>
        </div>
    </div>

    <script>
        // Oyun verileri
        const gameData = {
            score: 0,
            correctAnswers: 0,
            totalQuestions: 0,
            currentStreak: 0,
            maxStreak: 0,
            currentLanguage: 'en',
            currentDifficulty: 'easy',
            timer: 20,
            timerInterval: null,
            isGameActive: false,
            currentQuestion: null,
            adCounter: 0,
            lastAdTime: 0,
            videoRewardAvailable: true,
            questionsSinceLastAd: 0,
            // Yeni: Kullanƒ±lan bayraklarƒ± takip etmek i√ßin
            usedFlags: {
                easy: [],
                medium: [],
                hard: []
            },
            // Yeni: T√ºm bayraklar bitince resetlemek i√ßin
            availableFlags: {
                easy: [],
                medium: [],
                hard: []
            }
        };

        // T√úM Dƒ∞LLER (12 dil)
        const languages = [
            { code: 'en', flag: 'üá∫üá∏', name: 'English' },
            { code: 'tr', flag: 'üáπüá∑', name: 'T√ºrk√ße' },
            { code: 'es', flag: 'üá™üá∏', name: 'Espa√±ol' },
            { code: 'fr', flag: 'üá´üá∑', name: 'Fran√ßais' },
            { code: 'de', flag: 'üá©üá™', name: 'Deutsch' },
            { code: 'it', flag: 'üáÆüáπ', name: 'Italiano' },
            { code: 'pt', flag: 'üáµüáπ', name: 'Portugu√™s' },
            { code: 'ru', flag: 'üá∑üá∫', name: '–†—É—Å—Å–∫–∏–π' },
            { code: 'ar', flag: 'üá∏üá¶', name: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©' },
            { code: 'zh', flag: 'üá®üá≥', name: '‰∏≠Êñá' },
            { code: 'ja', flag: 'üáØüáµ', name: 'Êó•Êú¨Ë™û' },
            { code: 'hi', flag: 'üáÆüá≥', name: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä' }
        ];

        // T√úM Dƒ∞L √áEVƒ∞Rƒ∞LERƒ∞
        const translations = {
            en: { question: "Which country does this flag belong to?", score: "Score", correct: "Correct", streak: "Streak", easy: "Easy", medium: "Medium", hard: "Hard", rewardText: "+10 sec Video", langName: "English", gameOver: "Game Over!" },
            tr: { question: "Bu bayrak hangi √ºlkeye aittir?", score: "Puan", correct: "Doƒüru", streak: "Seri", easy: "Kolay", medium: "Orta", hard: "Zor", rewardText: "+10 san Video", langName: "T√ºrk√ße", gameOver: "Oyun Bitti!" },
            es: { question: "¬øA qu√© pa√≠s pertenece esta bandera?", score: "Puntuaci√≥n", correct: "Correctas", streak: "Racha", easy: "F√°cil", medium: "Medio", hard: "Dif√≠cil", rewardText: "+10 seg Video", langName: "Espa√±ol", gameOver: "¬°Juego Terminado!" },
            fr: { question: "√Ä quel pa√≠s pertenece ce drapeau ?", score: "Score", correct: "Correctes", streak: "S√©rie", easy: "Facile", medium: "Moyen", hard: "Difficile", rewardText: "+10 sec Vid√©o", langName: "Fran√ßais", gameOver: "Jeu Termin√© !" },
            de: { question: "Zu welchem Land geh√∂rt diese Flagge?", score: "Punkte", correct: "Richtig", streak: "Serie", easy: "Einfach", medium: "Mittel", hard: "Schwer", rewardText: "+10 sek Video", langName: "Deutsch", gameOver: "Spiel Beendet!" },
            it: { question: "A quale paese appartiene questa bandiera?", score: "Punteggio", correct: "Corrette", streak: "Serie", easy: "Facile", medium: "Medio", hard: "Difficile", rewardText: "+10 sec Video", langName: "Italiano", gameOver: "Gioco Finito!" },
            pt: { question: "A qual pa√≠s pertence esta bandeira?", score: "Pontua√ß√£o", correct: "Corretas", streak: "Sequ√™ncia", easy: "F√°cil", medium: "M√©dio", hard: "Dif√≠cil", rewardText: "+10 seg Video", langName: "Portugu√™s", gameOver: "Jogo Terminado!" },
            ru: { question: "–ö–∞–∫–æ–π —Å—Ç—Ä–∞–Ω–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —ç—Ç–æ—Ç —Ñ–ª–∞–≥?", score: "–°—á—ë—Ç", correct: "–ü—Ä–∞–≤–∏–ª—å–Ω–æ", streak: "–°–µ—Ä–∏—è", easy: "–õ–µ–≥–∫–æ", medium: "–°—Ä–µ–¥–Ω–µ", hard: "–°–ª–æ–∂–Ω–æ", rewardText: "+10 —Å–µ–∫ –í–∏–¥–µ–æ", langName: "–†—É—Å—Å–∫–∏–π", gameOver: "–ò–≥—Ä–∞ –û–∫–æ–Ω—á–µ–Ω–∞!" },
            ar: { question: "ÿ•ŸÑŸâ ÿ£Ÿä ÿØŸàŸÑÿ© ŸäŸÜÿ™ŸÖŸä Ÿáÿ∞ÿß ÿßŸÑÿπŸÑŸÖÿü", score: "ÿßŸÑŸÜŸÇÿßÿ∑", correct: "ÿµÿ≠Ÿäÿ≠ÿ©", streak: "ŸÖÿ™ÿ™ÿßŸÑŸäÿ©", easy: "ÿ≥ŸáŸÑ", medium: "ŸÖÿ™Ÿàÿ≥ÿ∑", hard: "ÿµÿπÿ®", rewardText: "+10 ÿ´ÿßŸÜŸäÿ© ŸÅŸäÿØŸäŸà", langName: "ÿßŸÑÿπÿ±ÿ®Ÿäÿ©", gameOver: "ÿßŸÜÿ™Ÿáÿ™ ÿßŸÑŸÑÿπÿ®ÿ©!" },
            zh: { question: "ËøôÈù¢ÊóóÂ∏úÂ±û‰∫éÂì™‰∏™ÂõΩÂÆ∂Ôºü", score: "ÂàÜÊï∞", correct: "Ê≠£Á°Æ", streak: "ËøûËÉú", easy: "ÁÆÄÂçï", medium: "‰∏≠Á≠â", hard: "Âõ∞Èöæ", rewardText: "+10ÁßíËßÜÈ¢ë", langName: "‰∏≠Êñá", gameOver: "Ê∏∏ÊàèÁªìÊùü!" },
            ja: { question: "„Åì„ÅÆÊóó„ÅØ„Å©„ÅÆÂõΩ„Å´Â±û„Åó„Åæ„Åô„ÅãÔºü", score: "„Çπ„Ç≥„Ç¢", correct: "Ê≠£Ëß£", streak: "ËøûÁ∂ö", easy: "Á∞°Âçò", medium: "ÊôÆÈÄö", hard: "Èõ£„Åó„ÅÑ", rewardText: "+10Áßí„Éì„Éá„Ç™", langName: "Êó•Êú¨Ë™û", gameOver: "„Ç≤„Éº„É†„Ç™„Éº„Éê„Éº!" },
            hi: { question: "‡§Ø‡§π ‡§ß‡•ç‡§µ‡§ú ‡§ï‡§ø‡§∏ ‡§¶‡•á‡§∂ ‡§∏‡•á ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§π‡•à?", score: "‡§∏‡•ç‡§ï‡•ã‡§∞", correct: "‡§∏‡§π‡•Ä", streak: "‡§≤‡§ó‡§æ‡§§‡§æ‡§∞", easy: "‡§Ü‡§∏‡§æ‡§®", medium: "‡§Æ‡§ß‡•ç‡§Ø‡§Æ", hard: "‡§ï‡§†‡§ø‡§®", rewardText: "+10 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã", langName: "‡§π‡§ø‡§®‡•ç‡§¶‡•Ä", gameOver: "‡§ñ‡•á‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§!" }
        };

        // √úlke verileri (kƒ±saltƒ±lmƒ±≈ü)
        const countries = {
            easy: [
                { code: 'US', flag: 'üá∫üá∏', names: { en: 'United States', tr: 'Amerika', es: 'Estados Unidos', fr: '√âtats-Unis', de: 'USA', it: 'Stati Uniti', pt: 'EUA', ru: '–°–®–ê', ar: 'ÿ£ŸÖÿ±ŸäŸÉÿß', zh: 'ÁæéÂõΩ', ja: '„Ç¢„É°„É™„Ç´', hi: '‡§Ö‡§Æ‡•á‡§∞‡§ø‡§ï‡§æ' }},
                { code: 'GB', flag: 'üá¨üáß', names: { en: 'United Kingdom', tr: 'ƒ∞ngiltere', es: 'Reino Unido', fr: 'Royaume-Uni', de: 'Gro√übritannien', it: 'Regno Unito', pt: 'Reino Unido', ru: '–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è', ar: 'ÿ®ÿ±Ÿäÿ∑ÿßŸÜŸäÿß', zh: 'Ëã±ÂõΩ', ja: '„Ç§„ÇÆ„É™„Çπ', hi: '‡§¨‡•ç‡§∞‡§ø‡§ü‡•á‡§®' }},
                { code: 'CN', flag: 'üá®üá≥', names: { en: 'China', tr: '√áin', es: 'China', fr: 'Chine', de: 'China', it: 'Cina', pt: 'China', ru: '–ö–∏—Ç–∞–π', ar: 'ÿßŸÑÿµŸäŸÜ', zh: '‰∏≠ÂõΩ', ja: '‰∏≠ÂõΩ', hi: '‡§ö‡•Ä‡§®' }},
                { code: 'JP', flag: 'üáØüáµ', names: { en: 'Japan', tr: 'Japonya', es: 'Jap√≥n', fr: 'Japon', de: 'Japan', it: 'Giappone', pt: 'Jap√£o', ru: '–Ø–ø–æ–Ω–∏—è', ar: 'ÿßŸÑŸäÿßÿ®ÿßŸÜ', zh: 'Êó•Êú¨', ja: 'Êó•Êú¨', hi: '‡§ú‡§æ‡§™‡§æ‡§®' }},
                { code: 'DE', flag: 'üá©üá™', names: { en: 'Germany', tr: 'Almanya', es: 'Alemania', fr: 'Allemagne', de: 'Deutschland', it: 'Germania', pt: 'Alemanha', ru: '–ì–µ—Ä–º–∞–Ω–∏—è', ar: 'ÿ£ŸÑŸÖÿßŸÜŸäÿß', zh: 'Âæ∑ÂõΩ', ja: '„Éâ„Ç§„ÉÑ', hi: '‡§ú‡§∞‡•ç‡§Æ‡§®‡•Ä' }},
                { code: 'FR', flag: 'üá´üá∑', names: { en: 'France', tr: 'Fransa', es: 'Francia', fr: 'France', de: 'Frankreich', it: 'Francia', pt: 'Fran√ßa', ru: '–§—Ä–∞–Ω—Ü–∏—è', ar: 'ŸÅÿ±ŸÜÿ≥ÿß', zh: 'Ê≥ïÂõΩ', ja: '„Éï„É©„É≥„Çπ', hi: '‡§´‡•ç‡§∞‡§æ‡§Ç‡§∏' }},
                { code: 'IT', flag: 'üáÆüáπ', names: { en: 'Italy', tr: 'ƒ∞talya', es: 'Italia', fr: 'Italie', de: 'Italien', it: 'Italia', pt: 'It√°lia', ru: '–ò—Ç–∞–ª–∏—è', ar: 'ÿ•Ÿäÿ∑ÿßŸÑŸäÿß', zh: 'ÊÑèÂ§ßÂà©', ja: '„Ç§„Çø„É™„Ç¢', hi: '‡§á‡§ü‡§≤‡•Ä' }},
                { code: 'ES', flag: 'üá™üá∏', names: { en: 'Spain', tr: 'ƒ∞spanya', es: 'Espa√±a', fr: 'Espagne', de: 'Spanien', it: 'Spagna', pt: 'Espanha', ru: '–ò—Å–ø–∞–Ω–∏—è', ar: 'ÿ•ÿ≥ÿ®ÿßŸÜŸäÿß', zh: 'Ë•øÁè≠Áâô', ja: '„Çπ„Éö„Ç§„É≥', hi: '‡§∏‡•ç‡§™‡•á‡§®' }},
                { code: 'RU', flag: 'üá∑üá∫', names: { en: 'Russia', tr: 'Rusya', es: 'Rusia', fr: 'Russie', de: 'Russland', it: 'Russia', pt: 'R√∫ssia', ru: '–†–æ—Å—Å–∏—è', ar: 'ÿ±Ÿàÿ≥Ÿäÿß', zh: '‰øÑÁΩóÊñØ', ja: '„É≠„Ç∑„Ç¢', hi: '‡§∞‡•Ç‡§∏' }},
                { code: 'CA', flag: 'üá®üá¶', names: { en: 'Canada', tr: 'Kanada', es: 'Canad√°', fr: 'Canada', de: 'Kanada', it: 'Canada', pt: 'Canad√°', ru: '–ö–∞–Ω–∞–¥–∞', ar: 'ŸÉŸÜÿØÿß', zh: 'Âä†ÊãøÂ§ß', ja: '„Ç´„Éä„ÉÄ', hi: '‡§ï‡§®‡§æ‡§°‡§æ' }}
            ],
            medium: [
                { code: 'BE', flag: 'üáßüá™', names: { en: 'Belgium', tr: 'Bel√ßika', es: 'B√©lgica', fr: 'Belgique', de: 'Belgien', it: 'Belgio', pt: 'B√©lgica', ru: '–ë–µ–ª—å–≥–∏—è', ar: 'ÿ®ŸÑÿ¨ŸäŸÉÿß', zh: 'ÊØîÂà©Êó∂', ja: '„Éô„É´„ÇÆ„Éº', hi: '‡§¨‡•á‡§≤‡•ç‡§ú‡§ø‡§Ø‡§Æ' }},
                { code: 'AT', flag: 'üá¶üáπ', names: { en: 'Austria', tr: 'Avusturya', es: 'Austria', fr: 'Autriche', de: '√ñsterreich', it: 'Austria', pt: '√Åustria', ru: '–ê–≤—Å—Ç—Ä–∏—è', ar: 'ÿßŸÑŸÜŸÖÿ≥ÿß', zh: 'Â••Âú∞Âà©', ja: '„Ç™„Éº„Çπ„Éà„É™„Ç¢', hi: '‡§ë‡§∏‡•ç‡§ü‡•ç‡§∞‡§ø‡§Ø‡§æ' }},
                { code: 'DK', flag: 'üá©üá∞', names: { en: 'Denmark', tr: 'Danimarka', es: 'Dinamarca', fr: 'Danemark', de: 'D√§nemark', it: 'Danimarca', pt: 'Dinamarca', ru: '–î–∞–Ω–∏—è', ar: 'ÿßŸÑÿØŸÜŸÖÿßÿ±ŸÉ', zh: '‰∏πÈ∫¶', ja: '„Éá„É≥„Éû„Éº„ÇØ', hi: '‡§°‡•á‡§®‡§Æ‡§æ‡§∞‡•ç‡§ï' }},
                { code: 'FI', flag: 'üá´üáÆ', names: { en: 'Finland', tr: 'Finlandiya', es: 'Finlandia', fr: 'Finlande', de: 'Finnland', it: 'Finlandia', pt: 'Finl√¢ndia', ru: '–§–∏–Ω–ª—è–Ω–¥–∏—è', ar: 'ŸÅŸÜŸÑŸÜÿØÿß', zh: 'Ëä¨ÂÖ∞', ja: '„Éï„Ç£„É≥„É©„É≥„Éâ', hi: '‡§´‡§ø‡§®‡§≤‡•à‡§Ç‡§°' }},
                { code: 'NO', flag: 'üá≥üá¥', names: { en: 'Norway', tr: 'Norve√ß', es: 'Noruega', fr: 'Norv√®ge', de: 'Norwegen', it: 'Norvegia', pt: 'Noruega', ru: '–ù–æ—Ä–≤–µ–≥–∏—è', ar: 'ÿßŸÑŸÜÿ±ŸàŸäÿ¨', zh: 'Êå™Â®Å', ja: '„Éé„É´„Ç¶„Çß„Éº', hi: '‡§®‡•â‡§∞‡•ç‡§µ‡•á' }},
                { code: 'IE', flag: 'üáÆüá™', names: { en: 'Ireland', tr: 'ƒ∞rlanda', es: 'Irlanda', fr: 'Irlande', de: 'Irland', it: 'Irlanda', pt: 'Irlanda', ru: '–ò—Ä–ª–∞–Ω–¥–∏—è', ar: 'ÿ£Ÿäÿ±ŸÑŸÜÿØÿß', zh: 'Áà±Â∞îÂÖ∞', ja: '„Ç¢„Ç§„É´„É©„É≥„Éâ', hi: '‡§Ü‡§Ø‡§∞‡§≤‡•à‡§Ç‡§°' }},
                { code: 'CZ', flag: 'üá®üáø', names: { en: 'Czech Republic', tr: '√áekya', es: 'Rep√∫blica Checa', fr: 'R√©publique Tch√®que', de: 'Tschechien', it: 'Rep√∫blica Ceca', pt: 'Rep√∫blica Tcheca', ru: '–ß–µ—Ö–∏—è', ar: 'ÿßŸÑÿ™ÿ¥ŸäŸÉ', zh: 'Êç∑ÂÖã', ja: '„ÉÅ„Çß„Ç≥', hi: '‡§ö‡•á‡§ï ‡§ó‡§£‡§∞‡§æ‡§ú‡•ç‡§Ø' }},
                { code: 'HU', flag: 'üá≠üá∫', names: { en: 'Hungary', tr: 'Macaristan', es: 'Hungr√≠a', fr: 'Hongrie', de: 'Ungarn', it: 'Ungheria', pt: 'Hungria', ru: '–í–µ–Ω–≥—Ä–∏—è', ar: 'ÿßŸÑŸÖÿ¨ÿ±', zh: 'ÂåàÁâôÂà©', ja: '„Éè„É≥„Ç¨„É™„Éº', hi: '‡§π‡§Ç‡§ó‡§∞‡•Ä' }},
                { code: 'RO', flag: 'üá∑üá¥', names: { en: 'Romania', tr: 'Romanya', es: 'Ruman√≠a', fr: 'Roumanie', de: 'Rum√§nien', it: 'Romania', pt: 'Rom√™nia', ru: '–†—É–º—ã–Ω–∏—è', ar: 'ÿ±ŸàŸÖÿßŸÜŸäÿß', zh: 'ÁΩóÈ©¨Â∞º‰∫ö', ja: '„É´„Éº„Éû„Éã„Ç¢', hi: '‡§∞‡•ã‡§Æ‡§æ‡§®‡§ø‡§Ø‡§æ' }},
                { code: 'UA', flag: 'üá∫üá¶', names: { en: 'Ukraine', tr: 'Ukrayna', es: 'Ucrania', fr: 'Ukraine', de: 'Ukraine', it: 'Ucraina', pt: 'Ucr√¢nia', ru: '–£–∫—Ä–∞–∏–Ω–∞', ar: 'ÿ£ŸàŸÉÿ±ÿßŸÜŸäÿß', zh: '‰πåÂÖãÂÖ∞', ja: '„Ç¶„ÇØ„É©„Ç§„Éä', hi: '‡§Ø‡•Ç‡§ï‡•ç‡§∞‡•á‡§®' }}
            ],
            hard: [
                { code: 'IS', flag: 'üáÆüá∏', names: { en: 'Iceland', tr: 'ƒ∞zlanda', es: 'Islandia', fr: 'Islande', de: 'Island', it: 'Islanda', pt: 'Isl√¢ndia', ru: '–ò—Å–ª–∞–Ω–¥–∏—è', ar: 'ÿ¢Ÿäÿ≥ŸÑŸÜÿØÿß', zh: 'ÂÜ∞Â≤õ', ja: '„Ç¢„Ç§„Çπ„É©„É≥„Éâ', hi: '‡§Ü‡§á‡§∏‡§≤‡•à‡§Ç‡§°' }},
                { code: 'LU', flag: 'üá±üá∫', names: { en: 'Luxembourg', tr: 'L√ºksemburg', es: 'Luxemburgo', fr: 'Luxembourg', de: 'Luxemburg', it: 'Lussemburgo', pt: 'Luxemburgo', ru: '–õ—é–∫—Å–µ–º–±—É—Ä–≥', ar: 'ŸÑŸàŸÉÿ≥ŸÖÿ®Ÿàÿ±ÿ∫', zh: 'Âç¢Ê£ÆÂ†°', ja: '„É´„ÇØ„Çª„É≥„Éñ„É´„ÇØ', hi: '‡§≤‡§ï‡•ç‡§ú‡§º‡§Æ‡§¨‡§∞‡•ç‡§ó' }},
                { code: 'MT', flag: 'üá≤üáπ', names: { en: 'Malta', tr: 'Malta', es: 'Malta', fr: 'Malte', de: 'Malta', it: 'Malta', pt: 'Malta', ru: '–ú–∞–ª—å—Ç–∞', ar: 'ŸÖÿßŸÑÿ∑ÿß', zh: 'È©¨ËÄ≥‰ªñ', ja: '„Éû„É´„Çø', hi: '‡§Æ‡§æ‡§≤‡•ç‡§ü‡§æ' }},
                { code: 'CY', flag: 'üá®üáæ', names: { en: 'Cyprus', tr: 'Kƒ±brƒ±s', es: 'Chipre', fr: 'Chypre', de: 'Zypern', it: 'Cipro', pt: 'Chipre', ru: '–ö–∏–ø—Ä', ar: 'ŸÇÿ®ÿ±ÿµ', zh: 'Â°ûÊµ¶Ë∑ØÊñØ', ja: '„Ç≠„Éó„É≠„Çπ', hi: '‡§∏‡§æ‡§á‡§™‡•ç‡§∞‡§∏' }},
                { code: 'EE', flag: 'üá™üá™', names: { en: 'Estonia', tr: 'Estonya', es: 'Estonia', fr: 'Estonie', de: 'Estland', it: 'Estonia', pt: 'Est√¥nia', ru: '–≠—Å—Ç–æ–Ω–∏—è', ar: 'ÿ•ÿ≥ÿ™ŸàŸÜŸäÿß', zh: 'Áà±Ê≤ôÂ∞º‰∫ö', ja: '„Ç®„Çπ„Éà„Éã„Ç¢', hi: '‡§è‡§∏‡•ç‡§ü‡•ã‡§®‡§ø‡§Ø‡§æ' }},
                { code: 'LV', flag: 'üá±üáª', names: { en: 'Latvia', tr: 'Letonya', es: 'Letonia', fr: 'Lettonie', de: 'Lettland', it: 'Lettonia', pt: 'Let√¥nia', ru: '–õ–∞—Ç–≤–∏—è', ar: 'ŸÑÿßÿ™ŸÅŸäÿß', zh: 'ÊãâËÑ±Áª¥‰∫ö', ja: '„É©„Éà„Éì„Ç¢', hi: '‡§≤‡§æ‡§§‡§µ‡§ø‡§Ø‡§æ' }},
                { code: 'LT', flag: 'üá±üáπ', names: { en: 'Lithuania', tr: 'Litvanya', es: 'Lituania', fr: 'Lituanie', de: 'Litauen', it: 'Lituania', pt: 'Litu√¢nia', ru: '–õ–∏—Ç–≤–∞', ar: 'ŸÑŸäÿ™ŸàÿßŸÜŸäÿß', zh: 'Á´ãÈô∂ÂÆõ', ja: '„É™„Éà„Ç¢„Éã„Ç¢', hi: '‡§≤‡§ø‡§•‡•Å‡§Ü‡§®‡§ø‡§Ø‡§æ' }},
                { code: 'SK', flag: 'üá∏üá∞', names: { en: 'Slovakia', tr: 'Slovakya', es: 'Eslovaquia', fr: 'Slovaquie', de: 'Slowakei', it: 'Slovacchia', pt: 'Eslov√°quia', ru: '–°–ª–æ–≤–∞–∫–∏—è', ar: 'ÿ≥ŸÑŸàŸÅÿßŸÉŸäÿß', zh: 'ÊñØÊ¥õ‰ºêÂÖã', ja: '„Çπ„É≠„Éê„Ç≠„Ç¢', hi: '‡§∏‡•ç‡§≤‡•ã‡§µ‡§æ‡§ï‡§ø‡§Ø‡§æ' }},
                { code: 'SI', flag: 'üá∏üáÆ', names: { en: 'Slovenia', tr: 'Slovenya', es: 'Eslovenia', fr: 'Slov√©nie', de: 'Slowenien', it: 'Slovenia', pt: 'Eslov√™nia', ru: '–°–ª–æ–≤–µ–Ω–∏—è', ar: 'ÿ≥ŸÑŸàŸÅŸäŸÜŸäÿß', zh: 'ÊñØÊ¥õÊñáÂ∞º‰∫ö', ja: '„Çπ„É≠„Éô„Éã„Ç¢', hi: '‡§∏‡•ç‡§≤‡•ã‡§µ‡•á‡§®‡§ø‡§Ø‡§æ' }},
                { code: 'HR', flag: 'üá≠üá∑', names: { en: 'Croatia', tr: 'Hƒ±rvatistan', es: 'Croacia', fr: 'Croatie', de: 'Kroatien', it: 'Croazia', pt: 'Cro√°cia', ru: '–•–æ—Ä–≤–∞—Ç–∏—è', ar: 'ŸÉÿ±Ÿàÿßÿ™Ÿäÿß', zh: 'ÂÖãÁΩóÂú∞‰∫ö', ja: '„ÇØ„É≠„Ç¢„ÉÅ„Ç¢', hi: '‡§ï‡•ç‡§∞‡•ã‡§è‡§∂‡§ø‡§Ø‡§æ' }}
            ]
        };

        // Oyunu ba≈ülat
        function initGame() {
            setupEventListeners();
            populateLanguageMenu();
            updateLanguage('en');
            updateDifficulty('easy');
            loadAdMobAds();
            
            // T√ºm zorluk seviyeleri i√ßin mevcut bayraklarƒ± ba≈ülat
            initializeAvailableFlags();
            generateQuestion();
        }

        // Mevcut bayraklarƒ± ba≈ülat
        function initializeAvailableFlags() {
            for (const diff in countries) {
                gameData.availableFlags[diff] = [...countries[diff]];
                gameData.usedFlags[diff] = [];
            }
        }

        // Dil men√ºs√ºn√º doldur
        function populateLanguageMenu() {
            const menu = document.getElementById('languageMenu');
            menu.innerHTML = '';
            
            languages.forEach(lang => {
                const btn = document.createElement('button');
                btn.className = 'menu-option lang-option';
                btn.innerHTML = `${lang.flag} ${lang.name}`;
                btn.onclick = () => {
                    updateLanguage(lang.code);
                    toggleLanguageMenu();
                };
                menu.appendChild(btn);
            });
        }

        // Dil men√ºs√ºn√º a√ß/kapat
        function toggleLanguageMenu() {
            const menu = document.getElementById('languageMenu');
            const isActive = menu.classList.toggle('active');
            
            // Diƒüer men√ºy√º kapat
            const diffMenu = document.getElementById('difficultyMenu');
            diffMenu.classList.remove('active');
            
            // Men√º dƒ±≈üƒ±na tƒ±klanƒ±nca kapat
            if (isActive) {
                setTimeout(() => {
                    document.addEventListener('click', closeMenusOnClickOutside);
                }, 10);
            } else {
                document.removeEventListener('click', closeMenusOnClickOutside);
            }
        }

        // Zorluk men√ºs√ºn√º a√ß/kapat
        function toggleDifficultyMenu() {
            const menu = document.getElementById('difficultyMenu');
            const isActive = menu.classList.toggle('active');
            
            // Diƒüer men√ºy√º kapat
            const langMenu = document.getElementById('languageMenu');
            langMenu.classList.remove('active');
            
            // Men√º dƒ±≈üƒ±na tƒ±klanƒ±nca kapat
            if (isActive) {
                setTimeout(() => {
                    document.addEventListener('click', closeMenusOnClickOutside);
                }, 10);
            } else {
                document.removeEventListener('click', closeMenusOnClickOutside);
            }
        }

        function closeMenusOnClickOutside(e) {
            const langMenu = document.getElementById('languageMenu');
            const diffMenu = document.getElementById('difficultyMenu');
            const langButton = document.querySelector('.language-btn');
            const diffButton = document.querySelector('.difficulty-btn');
            
            const isClickOutsideLang = !langMenu.contains(e.target) && !langButton.contains(e.target);
            const isClickOutsideDiff = !diffMenu.contains(e.target) && !diffButton.contains(e.target);
            
            if (isClickOutsideLang && langMenu.classList.contains('active')) {
                langMenu.classList.remove('active');
            }
            
            if (isClickOutsideDiff && diffMenu.classList.contains('active')) {
                diffMenu.classList.remove('active');
            }
            
            if (isClickOutsideLang && isClickOutsideDiff) {
                document.removeEventListener('click', closeMenusOnClickOutside);
            }
        }

        // AdMob reklamlarƒ±nƒ± y√ºkle
        function loadAdMobAds() {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                updateVideoRewardButton();
            } catch (error) {
                console.error('AdMob y√ºkleme hatasƒ±:', error);
            }
        }

        // Event listener'larƒ± kur
        function setupEventListeners() {
            // Zorluk men√ºs√ºndeki butonlarƒ± aktif et
            document.querySelectorAll('.diff-option').forEach(btn => {
                btn.addEventListener('click', function() {
                    const diff = this.dataset.diff;
                    updateDifficulty(diff);
                    toggleDifficultyMenu();
                });
            });
        }

        // Dil g√ºncelle
        function updateLanguage(lang) {
            gameData.currentLanguage = lang;
            const t = translations[lang];
            
            // Dil butonunu g√ºncelle
            document.getElementById('currentLangCode').textContent = lang.toUpperCase();
            document.getElementById('questionText').textContent = t.question;
            document.getElementById('currentLanguage').textContent = t.langName;
            
            // Dil men√ºs√ºndeki aktif butonu g√ºncelle
            document.querySelectorAll('.lang-option').forEach(opt => {
                opt.classList.remove('active');
                if (opt.textContent.includes(t.langName)) {
                    opt.classList.add('active');
                }
            });
            
            // Video reklam butonunu g√ºncelle
            document.getElementById('rewardText').textContent = t.rewardText;
            
            // Sonu√ß ekranƒ± ba≈ülƒ±ƒüƒ±nƒ± g√ºncelle
            if (document.getElementById('resultTitle')) {
                document.getElementById('resultTitle').textContent = t.gameOver;
            }
            
            // Eƒüer aktif soru varsa, cevap se√ßeneklerini g√ºncelle
            if (gameData.currentQuestion) {
                renderAnswerOptions();
            }
        }

        // Video reklam butonunu g√ºncelle
        function updateVideoRewardButton() {
            const btn = document.getElementById('videoRewardBtn');
            btn.disabled = !gameData.videoRewardAvailable;
        }

        // Zorluk g√ºncelle
        function updateDifficulty(diff) {
            gameData.currentDifficulty = diff;
            
            // Butonu g√ºncelle
            const diffNames = { easy: 'EASY', medium: 'MEDIUM', hard: 'HARD' };
            document.getElementById('currentDifficultyCode').textContent = diffNames[diff];
            
            // Zorluk men√ºs√ºndeki aktif butonu g√ºncelle
            document.querySelectorAll('.diff-option').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.diff === diff);
            });
            
            // Mevcut bayraklarƒ± resetle
            if (gameData.availableFlags[diff].length === 0) {
                resetUsedFlags(diff);
            }
            
            // Yeni soru olu≈ütur
            generateQuestion();
        }

        // Kullanƒ±lan bayraklarƒ± resetle
        function resetUsedFlags(difficulty) {
            gameData.availableFlags[difficulty] = [...countries[difficulty]];
            gameData.usedFlags[difficulty] = [];
        }

        // Soru olu≈ütur
        function generateQuestion() {
            clearInterval(gameData.timerInterval);
            
            const difficulty = gameData.currentDifficulty;
            let availableFlags = gameData.availableFlags[difficulty];
            
            // Eƒüer t√ºm bayraklar kullanƒ±ldƒ±ysa, resetle
            if (availableFlags.length === 0) {
                resetUsedFlags(difficulty);
                availableFlags = gameData.availableFlags[difficulty];
            }
            
            // Rastgele bir bayrak se√ß
            const randomIndex = Math.floor(Math.random() * availableFlags.length);
            const correctCountry = availableFlags[randomIndex];
            
            // Se√ßilen bayraƒüƒ± kullanƒ±lanlara ekle ve mevcutlardan √ßƒ±kar
            gameData.usedFlags[difficulty].push(correctCountry);
            availableFlags.splice(randomIndex, 1);
            
            // Yanlƒ±≈ü se√ßenekleri se√ß
            const wrongCountries = [];
            const allCountries = countries[difficulty];
            const usedCodes = new Set([correctCountry.code]);
            
            while (wrongCountries.length < 3) {
                const randomCountry = allCountries[Math.floor(Math.random() * allCountries.length)];
                if (!usedCodes.has(randomCountry.code) && randomCountry.code !== correctCountry.code) {
                    wrongCountries.push(randomCountry);
                    usedCodes.add(randomCountry.code);
                }
            }
            
            const allOptions = [correctCountry, ...wrongCountries];
            shuffleArray(allOptions);
            
            const correctIndex = allOptions.findIndex(opt => opt.code === correctCountry.code);
            
            gameData.currentQuestion = {
                country: correctCountry,
                options: allOptions,
                correctIndex: correctIndex
            };
            
            document.getElementById('flagDisplay').textContent = correctCountry.flag;
            renderAnswerOptions();
            startTimer();
            
            gameData.questionsSinceLastAd++;
            gameData.totalQuestions++;
            
            if (gameData.questionsSinceLastAd >= 10) {
                gameData.questionsSinceLastAd = 0;
                setTimeout(showInterstitialAd, 1000);
            }
            
            if (gameData.totalQuestions % 3 === 0) {
                gameData.videoRewardAvailable = true;
                updateVideoRewardButton();
            }
            
            updateStats();
        }

        // Cevap se√ßeneklerini render et
        function renderAnswerOptions() {
            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';
            
            gameData.currentQuestion.options.forEach((country, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = country.names[gameData.currentLanguage];
                btn.onclick = () => checkAnswer(index);
                container.appendChild(btn);
            });
        }

        // Cevabƒ± kontrol et
        function checkAnswer(selectedIndex) {
            if (!gameData.isGameActive) return;
            
            clearInterval(gameData.timerInterval);
            gameData.isGameActive = false;
            
            const correctIndex = gameData.currentQuestion.correctIndex;
            const isCorrect = selectedIndex === correctIndex;
            const buttons = document.querySelectorAll('.option-btn');
            
            buttons.forEach((btn, index) => {
                if (index === correctIndex) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex && !isCorrect) {
                    btn.classList.add('wrong');
                }
                btn.style.pointerEvents = 'none';
            });
            
            const timeLeft = parseInt(document.getElementById('timerDisplay').textContent);
            let points = 0;
            
            if (isCorrect) {
                points = 100 + (timeLeft * 5);
                gameData.correctAnswers++;
                gameData.currentStreak++;
                
                if (gameData.currentStreak > gameData.maxStreak) {
                    gameData.maxStreak = gameData.currentStreak;
                }
            } else {
                points = 0;
                gameData.currentStreak = 0;
            }
            
            gameData.score += points;
            updateStats();
            
            setTimeout(() => {
                if (gameData.totalQuestions >= 10) {
                    endGame();
                } else {
                    generateQuestion();
                }
            }, 1500);
        }

        // Timer'ƒ± ba≈ülat
        function startTimer() {
            clearInterval(gameData.timerInterval);
            gameData.timer = 20;
            gameData.isGameActive = true;
            
            document.getElementById('timerDisplay').textContent = gameData.timer;
            document.getElementById('timeFill').style.width = '100%';
            
            gameData.timerInterval = setInterval(() => {
                gameData.timer--;
                document.getElementById('timerDisplay').textContent = gameData.timer;
                
                const width = (gameData.timer / 20) * 100;
                document.getElementById('timeFill').style.width = `${width}%`;
                
                if (gameData.timer <= 0) {
                    clearInterval(gameData.timerInterval);
                    timeUp();
                }
            }, 1000);
        }

        // S√ºre doldu
        function timeUp() {
            if (!gameData.isGameActive) return;
            
            gameData.isGameActive = false;
            gameData.currentStreak = 0;
            
            const buttons = document.querySelectorAll('.option-btn');
            const correctIndex = gameData.currentQuestion.correctIndex;
            
            buttons.forEach((btn, index) => {
                if (index === correctIndex) {
                    btn.classList.add('correct');
                }
                btn.style.pointerEvents = 'none';
            });
            
            updateStats();
            
            setTimeout(() => {
                if (gameData.totalQuestions >= 10) {
                    endGame();
                } else {
                    generateQuestion();
                }
            }, 1500);
        }

        // ƒ∞statistikleri g√ºncelle
        function updateStats() {
            document.getElementById('score').textContent = gameData.score;
            document.getElementById('questions').textContent = `${gameData.totalQuestions}/10`;
            document.getElementById('streak').textContent = gameData.currentStreak;
        }

        // Oyunu bitir
        function endGame() {
            const t = translations[gameData.currentLanguage];
            
            document.getElementById('finalScore').textContent = gameData.score;
            document.getElementById('finalCorrect').textContent = gameData.correctAnswers;
            document.getElementById('finalStreak').textContent = gameData.maxStreak;
            
            const accuracy = gameData.totalQuestions > 0 ? 
                Math.round((gameData.correctAnswers / gameData.totalQuestions) * 100) : 0;
            document.getElementById('finalAccuracy').textContent = `${accuracy}%`;
            
            document.getElementById('resultTitle').textContent = t.gameOver;
            document.getElementById('resultScreen').style.display = 'flex';
            
            setTimeout(showInterstitialAd, 1000);
        }

        // Oyunu yeniden ba≈ülat
        function restartGame() {
            gameData.score = 0;
            gameData.correctAnswers = 0;
            gameData.totalQuestions = 0;
            gameData.currentStreak = 0;
            gameData.maxStreak = 0;
            gameData.adCounter = 0;
            gameData.questionsSinceLastAd = 0;
            gameData.videoRewardAvailable = true;
            
            // Kullanƒ±lan bayraklarƒ± resetle
            for (const diff in gameData.usedFlags) {
                gameData.usedFlags[diff] = [];
                gameData.availableFlags[diff] = [...countries[diff]];
            }
            
            updateStats();
            document.getElementById('resultScreen').style.display = 'none';
            updateVideoRewardButton();
            generateQuestion();
        }

        // INTERSTITIAL REKLAM
        function showInterstitialAd() {
            try {
                document.getElementById('interstitialAd').style.display = 'flex';
                gameData.lastAdTime = Date.now();
            } catch (error) {
                console.error('Interstitial reklam hatasƒ±:', error);
                showFallbackInterstitial();
            }
        }

        function showFallbackInterstitial() {
            document.getElementById('interstitialAd').style.display = 'flex';
            gameData.lastAdTime = Date.now();
        }

        function closeInterstitial() {
            document.getElementById('interstitialAd').style.display = 'none';
        }

        // REWARD VIDEO REKLAM
        function showRewardVideoAd() {
            if (!gameData.videoRewardAvailable) return;
            
            try {
                giveVideoReward();
                gameData.videoRewardAvailable = false;
                updateVideoRewardButton();
            } catch (error) {
                giveVideoReward();
                gameData.videoRewardAvailable = false;
                updateVideoRewardButton();
            }
        }

        function watchRewardVideo() {
            closeInterstitial();
            showRewardVideoAd();
        }

        function giveVideoReward() {
            gameData.timer += 10;
            document.getElementById('timerDisplay').textContent = gameData.timer;
            
            const t = translations[gameData.currentLanguage];
            alert(t.rewardText + ' rewarded!');
        }

        // Yardƒ±mcƒ± fonksiyon: Array karƒ±≈ütƒ±rma
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Sayfa y√ºklendiƒüinde oyunu ba≈ülat
        window.addEventListener('DOMContentLoaded', initGame);
        window.addEventListener('load', function() {
            setTimeout(loadAdMobAds, 1000);
        });
    </script>
</body>
</html>